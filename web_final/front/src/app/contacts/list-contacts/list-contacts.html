<div class="container mt-4">
    <h2>Contact List</h2>

    <div *ngIf="loading" class="text-center my-4">
        <div class="spinner-border text-primary" role="status"></div>
    </div>

    <div *ngIf="!loading">

        <button class="btn btn-dark" (click)="openModal()">Create new contact</button>

        <table class="table table-striped table-hover mt-3">
            <thead class="table-dark">
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>CellPhone</th>
                    <th>Options</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let contact of contacts">
                    <td>{{ contact.first_name }}</td>
                    <td>{{ contact.last_name }}</td>
                    <td>{{ contact.email }}</td>
                    <td>{{ contact.phone }}</td>
                    <td>{{ contact.cellphone }}</td>
                    <td>
                        <button class="btn btn-dark" (click)="openModal(contact)">Edit</button>
                        <button class="btn btn-secondary ms-2" (click)="openModalDelete(contact)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div *ngIf="showFormModal" class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,0.5);">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{{selectedContact ? 'Editar' :'Crear' }} Contacto</h5>
                    <button type="button" class="btn-close" (click)="closeModal()"></button>
                </div>
                <div class="modal-body">
                    <app-contact-form [contact]="selectedContact"
                        (formSubmit)="onFormSubmit($event)"></app-contact-form>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="showFormModalDelete" class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,0.5);">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header ">
                    <h5 class="modal-title">Â¿Confirm delete contact?</h5>
                    <button type="button" class="btn-close" (click)="closeModalDelete()"></button>
                </div>
                <div class="modal-body text-center">
                    <button class="btn btn-dark me-2" (click)="deleteContact()">Confirm</button>
                    <button class="btn btn-secondary ms-2" (click)="closeModalDelete() ">Cancel</button>
                </div>
            </div>
        </div>
    </div>


</div>